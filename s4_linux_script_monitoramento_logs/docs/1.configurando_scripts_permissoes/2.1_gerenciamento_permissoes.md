# 2. Gerenciamento de permissões

Já criamos nosso script com a estrutura inicial e agora queremos executá-lo para verificar se está tudo funcionando conforme o esperado. Porém, no Linux, sempre que desejamos executar um script Bash pela primeira vez,` precisamos conceder permissão de execução para ele`.

## Gerenciando permissões

Com o terminal aberto na pasta onde está o script, vamos rodar o seguinte comando:

```bash
chmod 755 monitoramento-logs.sh
```
Após pressionar "Enter", já teremos aplicado a permissão de execução.

O comando `chmod` no Linux é utilizado para gerenciar permissões, `adicionando` ou `removendo` permissões em arquivos e diretórios. Mas o que significam os números que utilizamos? Como sabemos quais números usar para adicionar e remover essas permissões? Vamos entender em detalhes como funciona essa gestão de permissões no Linux.
## Tipos de permissões

É importante compreender esses detalhes de gerenciamento de permissões, pois são fundamentais para a segurança e administração do sistema. Existem diferentes tipos de permissões que podemos conceder ou retirar de arquivos e diretórios.

* A primeira é a permissão de leitura, representada pela letra `r` (read, em inglês), que permite acessar o conteúdo de um arquivo ou listar arquivos de um diretório.

* A segunda é a permissão de escrita, representada pela letra `w` (de write, em inglês), que permite modificar arquivos ou o conteúdo de um diretório.

Por fim, temos a permissão de execução, representada pela letra `x` (de execute, em inglês), que permite executar códigos, scripts e acessar diretórios.

## Classes de usuário

Além das permissões, existem classes de usuários no Linux.
## Classes de usuários

A primeira classe é o proprietário, representado pela letra `u`, que é o dono do arquivo. No nosso script, somos os proprietários.

Em seguida, temos o grupo, representado pela letra `g`, que é um grupo de usuários que não são os donos do arquivo, mas podem ter acesso a ele. Por exemplo, em uma instituição, é interessante que o time de desenvolvimento tenha acesso ao script. Então, podemos colocar essas pessoas em um grupo e conceder acesso ao grupo.

Por fim, temos outros, representados pela letra `o`, que são todos os usuários que não são nem o proprietário, nem parte de um grupo. Trata-se de pessoas de outros times que não estão trabalhando diretamente no projeto de processamento de logs.

Existe também a representação de todos os usuários, indicada pela letra a, que engloba proprietário, grupo e outros.

## Notação Octal

Quando escrevemos o comando `chmod 755`, utilizamos uma notação octal para representar as permissões. Essa notação usa números para indicar o tipo de permissão que estamos aplicando ou removendo.

Cada permissão tem um valor diferente:

    leitura (r) tem o valor 4
    gravação (w) tem o valor 2
    execução (x) tem o valor 1

E o que significa o valor 755? Vamos entender por partes, a seguir.

Cada um desses três algarismos representa uma classe de usuários. O primeiro indica as permissões para a classe de usuário `proprietário`. O segundo para a classe `grupo`. O terceiro para `outros`.

Para chegar ao 7, somamos os valores das permissões. O proprietário tem permissão de leitura (4), gravação (2) e execução (1). Logo, 4 + 2 + 1 será 7.

Para o grupo e outros, que têm apenas permissão de leitura e execução, somamos apenas 4 + 1, resultando em 5. Assim, chegamos ao número 755, do `chmod 755`.

## Notação simbólica

Além da notação octal, podemos usar a notação simbólica no chmod, que utiliza letras e símbolos para representar operações e usuários:

    o operador "+" adiciona permissões,
    o operador "-" remove permissões
    o operador "=" define permissões exatas

Por exemplo: `chmod u+x arquivo.sh`. A letra `u` indica o usuário proprietário. O símbolo de + adiciona uma permissão. A letra x representa a permissão de execução. Em outras palavras, estamos atribuindo a permissão de execução para o proprietário do arquivo arquivo.sh.

Outro exemplo: `chmod g-w arquivo.sh`. A letra `g` indica o grupo. O operador `-` remove uma permissão. O w representa a permissão de gravação. Ou seja, removemos a permissão de gravação do grupo.

Como seria o `chmod 755` na `notação simbólica`? 

Poderíamos usar o chmod +x Como estamos atribuindo a permissão de execução para todas as classes, podemos omitir a primeira informação, apenas colocando o operador de `+` e o `x`, de execução.

Para escolher entre notação octal e simbólica, é interessante considerar alguns aspectos. Por exemplo, a facilidade de uso. A notação octal é mais compacta e simples, enquanto a simbólica é mais específica.

Outro aspecto a se considerar, é o escopo de modificação. Na notação octal, atribuímos permissões para todas as classes, enquanto a notação simbólica permite mais especificidade ao adicionar ou remover permissões.

Há uma atividade "Para saber mais" sobre as notações para você explorar mais o assunto.
Verificando permissões

    Para limpar a tela do terminal, usa-se "Ctrl + L".

Para verificar as permissões de um arquivo, usamos o comando ls -l, que lista os arquivos e suas permissões:

    ls -l

No início da linha, caracteres indicam o tipo de arquivo e suas permissões. No nosso caso, temos:

    -rwxr-xr-x

O primeiro traço indica um arquivo regular. Caso fosse um diretório, seria a letra "d".

Os três primeiros dígitos representam as permissões do proprietário: r de leitura, w de escrita e x de execução.

Os três seguintes indicam permissões do grupo: r de leitura, um traço no lugar do w porque não há permissão de escrita, e o x de execução. Os últimos são as permissões de outros usuários, que são iguais ao anterior.

Em seguida, temos o nome do proprietário e o grupo atribuído ao arquivo.
Executando o script

Agora que entendemos a gestão de permissões, podemos executar nosso script. Basta executar o seguinte comando:

./monitoramento-logs.sh

Dessa forma, veremos na tela a seguinte mensagem:

    Verificando logs no diretorio ../myapps/logs

A saída na tela, gerada pelo comando echo, confirma que o script está verificando logs no diretório especificado.

Aprendemos a gerenciar permissões e executar scripts. Na sequência, vamos entender como gerenciar grupos.

## Question - Segurança de dados

No Bytebank, um banco digital que oferece serviços bancários online, você está desenvolvendo um script para processar transações financeiras. É crucial que apenas o proprietário do script tenha permissão para modificá-lo, enquanto o grupo de analistas de segurança deve poder executá-lo para auditorias. Outros usuários não devem ter acesso ao script.

Como configurar as permissões para atender a esses requisitos de segurança?