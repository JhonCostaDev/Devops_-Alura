# Analisando números da plataforma insight places
No vídeo anterior, atendemos algumas demandas da empresa sobre informações de hospedagens ativas ou inativas e os dados das pessoas proprietárias dessas hospedagens.

Assim, a Insight Places poderá entrar em contato com essas pessoas e entender o motivo de algumas hospedagens estarem inativas e também estreitar os laços com as pessoas proprietárias que têm muitas hospedagens ativas na plataforma.

Agora, a empresa tem uma demanda para entender melhor a saúde geral do negócio. Ela gostaria de saber os meses com maior e menor demanda de aluguéis, porque dessa forma ela consegue fazer algumas ofertas mais atrativas nos períodos de baixa e consegue colocar um preço um pouco mais alto nos períodos de maior procura.

Como podemos atender essa demanda da Insight Places? Vamos na nossa interface do MySQL, na parte superior esquerda, clicar no símbolo de SQL+, para abrir uma nova aba de consulta, e agora vamos começar a estruturar essa nossa consulta.

Primeiro, vamos fazer um SELECT. Como queremos saber do período, sabemos que vamos trabalhar com data. Então, temos a data das reservas nas colunas de data_inicio e data_fim que está na tabela de aluguéis, onde temos as informações das reservas.

Então, vamos fazer um SELECT e vamos colocar a função YEAR para extrair o ano, e entre parênteses, colocaremos a coluna data_inicio. Vamos fechar os parênteses.

Vamos trazer essa informação com o apelido de AS ano. Agora vamos pôr uma vírgula, e também vamos extrair o mês. Então, vamos pôr a função MONTH, entre parênteses a coluna de data_inicio. Vamos fechar os parênteses. E ela vai vir como AS mes. Vamos pôr uma vírgula.

E agora vamos aplicar uma função COUNT. Vamos pôr parênteses e um asterisco, porque queremos contar todos os registros dessa tabela. Vamos pôr um apelido para essa contagem de AS total_alugueis.

De onde vão vir essas informações? Vão vir da tabela de aluguéis, então FROM alugueis. E aí vamos também agrupar essas informações. Vamos agrupar por ano e mês, porque fazendo esse agrupamento, o sistema vai pegar todos os registros que têm o mesmo ano e o mesmo mês e agrupá-los juntos. Aí vamos conseguir saber todas as reservas que foram feitas em cada mês de cada ano.

Vamos fazer um GROUP BY ano, mes. E vamos ordenar também. Então, vamos pôr um ORDER BY pela informação de total_alugueis, que criamos ali em cima, de forma decrescente. Então, aí vão vir dos meses que mais tiveram reservas para os meses que menos tiveram reservas. Vamos pôr o nosso ponto e vírgula e rodar a nossa consulta.

```SQL
SELECT YEAR(data_inicio) AS ano, MONTH(data_inicio) AS mes, COUNT(*) AS total_alugueis
FROM alugueis
GROUP BY ano, mes
ORDER BY total_alugueis DESC;
```

Se analisarmos o resultado, teremos o ano 2022, mês de dezembro, 467 reservas, ano de 2023, mês 12, 462, e assim por diante.

      ano	  mes	total_alugueis
      2022	12	467
      2023	12	462
      2023	7	  450
      2023	1	  450
      2023	11	447
...	...	...
Então, com essa informação, a Insight Places consegue fazer uma análise dos meses e anos que ela teve maior demanda e menor demanda. Se verificarmos, o mês que ela geralmente tem uma demanda maior é o mês de dezembro, e o mês que ela tem uma baixa é o mês de janeiro. Então, tanto de 2022 quanto de 2024, os dois meses de janeiro foram bem fracos.

Essa é uma informação muito relevante para a Insight Places fazer promoções atrativas no mês de janeiro. No mês de dezembro, ela pode aumentar um pouco o valor das hospedagens, porque é um mês que tem muita procura.