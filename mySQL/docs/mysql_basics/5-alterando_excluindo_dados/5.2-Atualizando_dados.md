# Atualizando Dados

## Reativando hospedagens
Para fazer essa atualização no banco de dados da Insight Places, podemos utilizar a cláusula UPDATE. Para isso, abriremos uma nova aba de consulta no MySQL Workbench. A empresa informou que conseguiu reativar três propriedades, identificadas pelos IDs 1, 10 e 100. Essas são as hospedagens que atualizaremos utilizando o comando UPDATE.

O UPDATE, que é a cláusula para atualizar os dados, deve ser utilizado em letras maiúsculas, seguindo a convenção de nomenclatura de funções da linguagem. Em seguida, indicaremos a tabela que será atualizada, que neste caso é a tabela hospedagens. Então, definiremos o valor que queremos atribuir à coluna que será modificada. No caso, utilizaremos 1 para representar que as hospedagens foram reativadas, atualizando a coluna ativo para 1.

```SQL
UPDATE hospedagens
SET ativo=1
```

Quando aplicamos cláusulas como UPDATE ou DELETE, que modificam a estrutura do banco de dados, geralmente é necessário incluir uma cláusula WHERE em seguida, que estabelece uma condição. Isso é crucial porque, por exemplo, se executarmos o código apenas com a modificação direta, como UPDATE hospedagem SET ativo = 1, todas as hospedagens seriam atualizadas para ativas. Isso poderia causar danos significativos em um banco de dados, especialmente se estivermos lidando com o banco de dados de uma empresa. É por isso que sempre é recomendável fazer um backup do banco de dados antes de executar operações críticas.

Ao incluir a cláusula WHERE, podemos especificar quais registros serão afetados pela alteração, evitando assim atualizar todos os registros indiscriminadamente e prejudicar a integridade dos dados. Portanto, vamos adicionar a cláusula WHERE, seguindo de hospedagem_id, onde a Insight Places já forneceu os IDs das hospedagens que precisam ser atualizadas.

Depois, usaremos o operador IN para atualizar múltiplos registros ao mesmo tempo, especificando os IDs 1, 10 e 100. Como a coluna de ID é do tipo texto, mesmo que contenha números, devemos envolvê-la em aspas simples. Em seguida, podemos encerrar a consulta com um ponto e vírgula antes de executá-la.

```SQL
UPDATE hospedagens
SET ativo=1
WHERE hospedagem_id IN ('1', '10', '100');
```
Retorno omitido.

Após a execução bem-sucedida do UPDATE, verificamos no histórico que três linhas foram afetadas, confirmando que os três registros foram atualizados conforme esperado.

Agora, para garantir que as atualizações foram aplicadas corretamente, podemos realizar um SELECT na tabela de hospedagens:

```SQL
SELECT * from hospedagens;
```
        hospedagem_id	tipo	endereco_id	proprietario_id	ativo
        1	            casa	    1	        1	          1
        10	            apartamento	10	        10	          1
        100	            hotel	    100	        100	          1
        1000	        casa	    1000	    1000	      1
        10000	        casa	    10000	    10000	      0

Ao inspecionar os registros, observamos que as hospedagens com IDs 1, 10 e 100 foram atualizadas com sucesso, refletindo o valor 1 na coluna ativo.

## Atualizando dados na tabela proprietarios
Além disso, uma pessoa proprietária alterou seu contato de e-mail, e a Insight Places precisa refletir essa alteração na tabela de proprietários. Vamos abrir uma nova aba de consulta para realizar o UPDATE nesta tabela.

Mas, antes de executar a consulta de atualização, é prudente realizar um SELECT na tabela de proprietários para verificar o e-mail atual da proprietária de número 1009 e confirmar se a atualização será aplicada conforme esperado:

```SQL
SELECT * from proprietarios;
```
Retorno omitido.

Ao executar a consulta e verificar o e-mail atual de Daniela Freitas, cujo ID é 1009, vemos que é daniela_120@dominio.com. Agora, podemos prosseguir com a consulta de atualização para modificar apenas a parte do domínio do e-mail para @email.com.

Para isso, utilizaremos a cláusula UPDATE, especificaremos o nome da tabela proprietrios e, em seguida, definiremos o novo e-mail como daniela_120@email.com para a proprietária de ID 1009, na coluna de contato. A condição WHERE garantirá que apenas o registro correspondente seja atualizado.

```SQL
UPDATE proprietarios
SET contato = 'daniela_120@email.com'
WHERE proprietario_id= '1009';
```

Após a execução bem-sucedida da consulta de atualização, faremos outro SELECT para garantir que a alteração tenha sido aplicada corretamente:

```SQL
SELECT * from proprietarios;
```
Após a execução da consulta, verificamos novamente o e-mail de Daniela Freitas e confirmamos que agora foi atualizado para daniela_120@email.com, como esperado.

### Conclusão e próximos passos
Agora que aprendemos como atualizar dados em nossas tabelas de banco de dados, concluímos as atualizações necessárias solicitadas pela Insight Places. No próximo vídeo, abordaremos como excluir dados de nossas tabelas. Até lá!

## Question

A empresa TechGadgets possui uma tabela no banco de dados chamada produtos que armazena informações sobre os itens que vende, incluindo:
    
    --------------------------------------------
    |id | nome | preco  | quantidade_em_estoque| 
    --------------------------------------------

Recentemente, a empresa decidiu aplicar um desconto de 10% em todos os produtos para promover vendas. Considerando esta situação, qual comando SQL UPDATE deverá ser utilizado para aplicar corretamente este desconto no preço de todos os produtos?

    a)  UPDATE produtos
        SET preco = preco * 0.9;
~ Esta alternativa aplica um desconto de 10% diretamente sobre o preço atual de cada produto, multiplicando o preco por 0.9 (ou seja, 90% do preço original), o que efetivamente reduz o preço de cada produto em 10%. Esta é a maneira correta e mais direta de aplicar um desconto percentual uniforme a todos os produtos.

    b)  UPDATE produtos
        SET preco = preco - (preco * 0.1)
        WHERE preco > 0;

~

    c)  UPDATE produtos
        SET nome = 'Desconto aplicado';

~

    d)  UPDATE produtos
        SET quantidade_em_estoque = quantidade_em_estoque - 10;